<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Resultado - Planeación</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 90%; margin: 10px 0; }
        th, td { border: 1px solid #333; padding: 6px 10px; text-align: left; }
        .params { margin-bottom: 12px; }
        .error { color: red; white-space: pre-wrap; border: 1px solid #f5c6cb; background: #f8d7da; padding: 10px; }
        .controls { margin-top: 14px; }
        a.button { display: inline-block; padding: 8px 12px; background: #1976d2; color: #fff; text-decoration: none; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Planeación Generada</h1>

    {% if error %}
        <div class="error">
            <strong>Error al generar la planeación:</strong>
            <div>{{ error }}</div>
        </div>
        <p><a href="/" class="button">Volver</a></p>
    {% else %}
        <div class="params">
            <strong>Parámetros:</strong>
            <ul>
                <li>Fecha inicio: {{ params.start_date }}</li>
                <li>Semanas: {{ params.weeks }}</li>
                <li>Rotación entre semanas: {{ "Sí" if params.rotation else "No" }}</li>
                <li>Asesora Apertura (fijo): {{ params.restriction if params.restriction else "(ninguna)" }}</li>
            </ul>
        </div>

        <div>
            {{ tabla|safe }}
        </div>

        <div class="controls">
            {% if download_url %}
                <a class="button" href="{{ download_url }}">Descargar CSV</a>
            {% endif %}
            <a class="button" href="/">Volver</a>
        </div>
    {% endif %}
</body>
</html>



